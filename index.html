<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Valentine Love</title>

  <style>
    :root {
      --bg: #ffd6e0;
      --main: #a4003a;
      --soft: #c2185b;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--main);
      height: 100svh; /* CLAVE PARA MÓVIL */
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 16px;
      overflow: hidden;
    }

    .top-text {
      text-align: center;
      font-size: clamp(1.2rem, 4vw, 1.8rem);
      font-weight: 600;
      margin-top: 8px;
      margin-bottom: 12px;
    }

    .animation-container {
      flex: 1;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    canvas {
      width: 100%;
      max-width: 380px;
      aspect-ratio: 1 / 1;
    }

    .bottom {
      text-align: center;
      margin-top: 12px;
      padding-bottom: 8px;
    }

    .since {
      font-size: 0.95rem;
      color: var(--soft);
      margin-bottom: 4px;
    }

    .counter {
      font-size: clamp(1rem, 3.8vw, 1.3rem);
      font-weight: 500;
    }
  </style>
</head>

<body>

  <div class="top-text">
    I would choose you in every life
  </div>

  <div class="animation-container">
    <canvas id="fireworks"></canvas>
  </div>

  <div class="bottom">
    <div class="since">We've loved each other since</div>
    <div class="counter" id="counter"></div>
  </div>

  <script>
    /* ===== COUNTER ===== */
    const startDate = new Date("2023-12-03T00:00:00");

    function updateCounter() {
      const now = new Date();
      let diff = Math.floor((now - startDate) / 1000);

      const days = Math.floor(diff / 86400);
      diff %= 86400;
      const hours = Math.floor(diff / 3600);
      diff %= 3600;
      const minutes = Math.floor(diff / 60);
      const seconds = diff % 60;

      document.getElementById("counter").textContent =
        `${days} days · ${hours} hours · ${minutes} minutes · ${seconds} seconds`;
    }

    setInterval(updateCounter, 1000);
    updateCounter();

    /* ===== HEART FIREWORK ===== */
    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");

    function resizeCanvas() {
      const dpr = window.devicePixelRatio || 1;
      canvas.width = canvas.clientWidth * dpr;
      canvas.height = canvas.clientHeight * dpr;
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }

    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);

    function heart(t) {
      return {
        x: 16 * Math.sin(t) ** 3,
        y: -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t))
      };
    }

    let particles = [];

    function spawn() {
      particles = [];
      for (let i = 0; i < 160; i++) {
        const t = Math.random() * Math.PI * 2;
        const p = heart(t);
        particles.push({
          x: canvas.clientWidth / 2,
          y: canvas.clientHeight / 2,
          vx: p.x * 0.6,
          vy: p.y * 0.6,
          life: 90
        });
      }
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.life--;

        ctx.beginPath();
        ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
        ctx.fillStyle = "rgba(216, 27, 96, 0.85)";
        ctx.fill();
      });

      particles = particles.filter(p => p.life > 0);
      requestAnimationFrame(animate);
    }

    spawn();
    setInterval(spawn, 1600);
    animate();
  </script>

</body>
</html>
